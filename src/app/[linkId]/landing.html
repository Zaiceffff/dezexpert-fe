<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Профессиональная дезинфекция - Безопасная среда для вашего дома</title>
    <meta name="description" content="Быстрые, безопасные и сертифицированные услуги дезинфекции. Экологичные химикаты, сертифицированные специалисты, работаем 24/7. Гарантия 100%.">
    <meta name="keywords" content="дезинфекция, дезинсекция, обработка от вредителей, безопасная среда, экологичные средства">
    
    <!-- FontAwesome для иконок -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <style>
        /* Кастомные анимации */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        .animate-fade-in-up {
            animation: fadeInUp 0.8s ease-out forwards;
        }
        
        .animate-float {
            animation: float 3s ease-in-out infinite;
        }
        
        /* Плавная прокрутка */
        html {
            scroll-behavior: smooth;
        }
        
        /* Кастомные цвета в стиле проекта */
        .bg-gradient-primary {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        }
        
        .bg-gradient-secondary {
            background: linear-gradient(135deg, #f0fdf4 0%, #ecfdf5 100%);
        }
        
        .text-gradient {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        /* Hover эффекты */
        .hover-lift {
            transition: all 0.3s ease;
        }
        
        .hover-lift:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        
        /* Адаптивные стили */
        @media (max-width: 768px) {
            .mobile-stack {
                flex-direction: column;
            }
            
            .mobile-full {
                width: 100%;
            }
        }
    </style>
</head>
<body class="bg-gray-50 font-sans">
    <!-- Header -->
    <header class="bg-gradient-primary text-white shadow-lg">
        <div class="container mx-auto px-4 py-6">
            <div class="flex flex-col md:flex-row items-center justify-between">
                <div class="text-center md:text-left mb-6 md:mb-0">
                    <h1 class="text-3xl md:text-4xl font-bold mb-2">
                        Профессиональная дезинфекция
                    </h1>
                    <p class="text-lg md:text-xl opacity-90">
                        Быстрые, безопасные и сертифицированные услуги дезинфекции
                    </p>
                </div>
                <div class="flex flex-col sm:flex-row gap-4">
                    <button 
                        onclick="scrollToForm()"
                        class="bg-white text-green-600 px-8 py-3 rounded-xl font-semibold hover:bg-gray-100 transition-all duration-300 transform hover:scale-105 shadow-lg"
                    >
                        <i class="fas fa-phone-alt mr-2"></i>
                        Получить консультацию
                    </button>
                    <div class="text-center sm:text-left">
                        <div class="text-sm opacity-75">Работаем 24/7</div>
                        <div class="text-lg font-semibold">+7 (800) 555-35-35</div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="py-16 md:py-24 bg-gradient-secondary">
        <div class="container mx-auto px-4 text-center">
            <div class="max-w-4xl mx-auto">
                <div class="mb-8">
                    <div class="inline-flex items-center justify-center w-24 h-24 bg-gradient-primary rounded-full mb-6 shadow-xl animate-float">
                        <i class="fas fa-shield-alt text-white text-3xl"></i>
                    </div>
                    <h2 class="text-4xl md:text-6xl font-bold text-gray-900 mb-6">
                        Безопасная среда для 
                        <span class="text-gradient">вашего дома</span>
                    </h2>
                    <p class="text-xl md:text-2xl text-gray-600 mb-8 leading-relaxed">
                        Избавьтесь от вредителей и бактерий с помощью современных технологий и экологичных средств
                    </p>
                </div>
                
                <div class="flex flex-col sm:flex-row gap-4 justify-center items-center">
                    <button 
                        onclick="scrollToForm()"
                        class="bg-gradient-primary text-white px-10 py-4 rounded-xl font-semibold text-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105 shadow-lg"
                    >
                        <i class="fas fa-calendar-check mr-2"></i>
                        Записаться на обработку
                    </button>
                    <button 
                        onclick="scrollToPricing()"
                        class="border-2 border-green-600 text-green-600 px-10 py-4 rounded-xl font-semibold text-lg hover:bg-green-600 hover:text-white transition-all duration-300"
                    >
                        <i class="fas fa-tags mr-2"></i>
                        Посмотреть цены
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- Advantages Section -->
    <section class="py-16 bg-white">
        <div class="container mx-auto px-4">
            <div class="text-center mb-16">
                <h3 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4">
                    Почему выбирают нас
                </h3>
                <p class="text-xl text-gray-600 max-w-2xl mx-auto">
                    Мы используем только проверенные методы и безопасные средства для вашей безопасности
                </p>
            </div>
            
            <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-8">
                <div class="text-center p-6 rounded-2xl bg-gray-50 hover-lift">
                    <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-leaf text-green-600 text-2xl"></i>
                    </div>
                    <h4 class="text-xl font-semibold text-gray-900 mb-3">
                        Экологичные химикаты
                    </h4>
                    <p class="text-gray-600">
                        Используем только сертифицированные безопасные средства
                    </p>
                </div>
                
                <div class="text-center p-6 rounded-2xl bg-gray-50 hover-lift">
                    <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-certificate text-green-600 text-2xl"></i>
                    </div>
                    <h4 class="text-xl font-semibold text-gray-900 mb-3">
                        Сертифицированные специалисты
                    </h4>
                    <p class="text-gray-600">
                        Опытные дезинсекторы с профильным образованием
                    </p>
                </div>
                
                <div class="text-center p-6 rounded-2xl bg-gray-50 hover-lift">
                    <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-clock text-green-600 text-2xl"></i>
                    </div>
                    <h4 class="text-xl font-semibold text-gray-900 mb-3">
                        Работаем 24/7
                    </h4>
                    <p class="text-gray-600">
                        Готовы приехать в любое время дня и ночи
                    </p>
                </div>
                
                <div class="text-center p-6 rounded-2xl bg-gray-50 hover-lift">
                    <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-heart text-green-600 text-2xl"></i>
                    </div>
                    <h4 class="text-xl font-semibold text-gray-900 mb-3">
                        Гарантия 100%
                    </h4>
                    <p class="text-gray-600">
                        Если не помогло - вернем деньги или повторим бесплатно
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- Pricing Section -->
    <section id="pricing" class="py-16 bg-gradient-secondary">
        <div class="container mx-auto px-4">
            <div class="text-center mb-16">
                <h3 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4">
                    Тарифы на услуги
                </h3>
                <p class="text-xl text-gray-600 max-w-2xl mx-auto">
                    Прозрачные цены без скрытых доплат. Выберите подходящий тариф
                </p>
            </div>
            
            <div id="pricing-container" class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- Loading state -->
                <div id="pricing-loading" class="text-center col-span-full">
                    <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto mb-4"></div>
                    <p class="text-gray-600">Загружаем тарифы...</p>
                </div>
                
                <!-- Fallback pricing -->
                <div id="pricing-fallback" class="hidden col-span-full">
                    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                        <div class="bg-white rounded-2xl p-8 shadow-lg hover-lift">
                            <div class="text-center mb-6">
                                <h4 class="text-2xl font-bold text-gray-900 mb-2">Базовая обработка</h4>
                                <div class="text-4xl font-bold text-green-600 mb-2">от 1500₽</div>
                                <p class="text-gray-600">Для квартир до 2 комнат</p>
                            </div>
                            <ul class="space-y-3 mb-8">
                                <li class="flex items-center">
                                    <i class="fas fa-check text-green-600 mr-3"></i>
                                    Обработка от тараканов
                                </li>
                                <li class="flex items-center">
                                    <i class="fas fa-check text-green-600 mr-3"></i>
                                    Безопасные средства
                                </li>
                                <li class="flex items-center">
                                    <i class="fas fa-check text-green-600 mr-3"></i>
                                    Гарантия 3 месяца
                                </li>
                            </ul>
                            <button 
                                onclick="scrollToForm()"
                                class="w-full bg-gradient-primary text-white py-3 rounded-xl font-semibold hover:shadow-lg transition-all duration-300"
                            >
                                Заказать
                            </button>
                        </div>
                        
                        <div class="bg-white rounded-2xl p-8 shadow-lg hover-lift border-2 border-green-500 relative">
                            <div class="absolute -top-4 left-1/2 transform -translate-x-1/2">
                                <span class="bg-green-500 text-white px-4 py-2 rounded-full text-sm font-semibold">
                                    Популярно
                                </span>
                            </div>
                            <div class="text-center mb-6">
                                <h4 class="text-2xl font-bold text-gray-900 mb-2">Комплексная обработка</h4>
                                <div class="text-4xl font-bold text-green-600 mb-2">от 2500₽</div>
                                <p class="text-gray-600">Для квартир до 3 комнат</p>
                            </div>
                            <ul class="space-y-3 mb-8">
                                <li class="flex items-center">
                                    <i class="fas fa-check text-green-600 mr-3"></i>
                                    От всех видов вредителей
                                </li>
                                <li class="flex items-center">
                                    <i class="fas fa-check text-green-600 mr-3"></i>
                                    Премиум средства
                                </li>
                                <li class="flex items-center">
                                    <i class="fas fa-check text-green-600 mr-3"></i>
                                    Гарантия 6 месяцев
                                </li>
                                <li class="flex items-center">
                                    <i class="fas fa-check text-green-600 mr-3"></i>
                                    Повторная обработка
                                </li>
                            </ul>
                            <button 
                                onclick="scrollToForm()"
                                class="w-full bg-gradient-primary text-white py-3 rounded-xl font-semibold hover:shadow-lg transition-all duration-300"
                            >
                                Заказать
                            </button>
                        </div>
                        
                        <div class="bg-white rounded-2xl p-8 shadow-lg hover-lift">
                            <div class="text-center mb-6">
                                <h4 class="text-2xl font-bold text-gray-900 mb-2">Премиум обработка</h4>
                                <div class="text-4xl font-bold text-green-600 mb-2">от 3500₽</div>
                                <p class="text-gray-600">Для частных домов</p>
                            </div>
                            <ul class="space-y-3 mb-8">
                                <li class="flex items-center">
                                    <i class="fas fa-check text-green-600 mr-3"></i>
                                    Полная дезинфекция
                                </li>
                                <li class="flex items-center">
                                    <i class="fas fa-check text-green-600 mr-3"></i>
                                    Элитные средства
                                </li>
                                <li class="flex items-center">
                                    <i class="fas fa-check text-green-600 mr-3"></i>
                                    Гарантия 12 месяцев
                                </li>
                                <li class="flex items-center">
                                    <i class="fas fa-check text-green-600 mr-3"></i>
                                    Консультация специалиста
                                </li>
                            </ul>
                            <button 
                                onclick="scrollToForm()"
                                class="w-full bg-gradient-primary text-white py-3 rounded-xl font-semibold hover:shadow-lg transition-all duration-300"
                            >
                                Заказать
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Order Form Section -->
    <section id="order-form" class="py-16 bg-white">
        <div class="container mx-auto px-4">
            <div class="text-center mb-16">
                <h3 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4">
                    Оставить заявку
                </h3>
                <p class="text-xl text-gray-600 max-w-2xl mx-auto">
                    Заполните форму ниже, и наш специалист свяжется с вами для уточнения деталей
                </p>
            </div>
            
            <div class="max-w-4xl mx-auto">
                <form id="orderForm" class="bg-gray-50 rounded-3xl p-8 shadow-xl">
                    <div class="grid md:grid-cols-2 gap-6 mb-6">
                        <div>
                            <label for="name" class="block text-sm font-medium text-gray-700 mb-2">
                                <i class="fas fa-user text-green-600 mr-2"></i>
                                Ваше имя *
                            </label>
                            <input 
                                type="text" 
                                id="name" 
                                name="name" 
                                required
                                class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200"
                                placeholder="Введите ваше имя"
                            >
                        </div>
                        
                        <div>
                            <label for="phone" class="block text-sm font-medium text-gray-700 mb-2">
                                <i class="fas fa-phone text-green-600 mr-2"></i>
                                Телефон *
                            </label>
                            <input 
                                type="tel" 
                                id="phone" 
                                name="phone" 
                                required
                                class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200"
                                placeholder="+7 (900) 555-33-21"
                            >
                        </div>
                        
                        <div>
                            <label for="email" class="block text-sm font-medium text-gray-700 mb-2">
                                <i class="fas fa-envelope text-green-600 mr-2"></i>
                                Email *
                            </label>
                            <input 
                                type="email" 
                                id="email" 
                                name="email" 
                                required
                                class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200"
                                placeholder="your@email.com"
                            >
                        </div>
                        
                        <div>
                            <label for="service" class="block text-sm font-medium text-gray-700 mb-2">
                                <i class="fas fa-bug text-green-600 mr-2"></i>
                                Выберите услугу *
                            </label>
                            <select 
                                id="service" 
                                name="service" 
                                required
                                class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200"
                            >
                                <option value="">Выберите услугу</option>
                                <option value="cockroaches">Обработка от тараканов</option>
                                <option value="bedbugs">Обработка от клопов</option>
                                <option value="flies">Обработка от мух</option>
                                <option value="ticks">Обработка от клещей</option>
                                <option value="ants">Обработка от муравьев</option>
                                <option value="wasps">Обработка от ос</option>
                                <option value="hornets">Обработка от шершней</option>
                                <option value="other">Другие насекомые</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="mb-6">
                        <label for="comment" class="block text-sm font-medium text-gray-700 mb-2">
                            <i class="fas fa-comment text-green-600 mr-2"></i>
                            Дополнительная информация
                        </label>
                        <textarea 
                            id="comment" 
                            name="comment" 
                            rows="4"
                            class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200 resize-none"
                            placeholder="Расскажите подробнее о проблеме (необязательно)"
                        ></textarea>
                    </div>
                    
                    <div class="text-center">
                        <button 
                            type="submit"
                            id="submitBtn"
                            class="bg-gradient-primary text-white px-12 py-4 rounded-xl font-semibold text-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105 shadow-lg"
                        >
                            <i class="fas fa-paper-plane mr-2"></i>
                            Отправить заявку
                        </button>
                    </div>
                    
                    <!-- Success/Error Messages -->
                    <div id="formMessage" class="hidden mt-6 p-4 rounded-xl text-center"></div>
                </form>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-900 text-white py-12">
        <div class="container mx-auto px-4">
            <div class="grid md:grid-cols-3 gap-8">
                <div>
                    <h4 class="text-xl font-semibold mb-4">О компании</h4>
                    <p class="text-gray-300 mb-4">
                        Мы предоставляем профессиональные услуги дезинфекции и дезинсекции с 2010 года
                    </p>
                    <div class="flex space-x-4">
                        <a href="#" class="text-gray-400 hover:text-white transition-colors">
                            <i class="fab fa-facebook text-xl"></i>
                        </a>
                        <a href="#" class="text-gray-400 hover:text-white transition-colors">
                            <i class="fab fa-instagram text-xl"></i>
                        </a>
                        <a href="#" class="text-gray-400 hover:text-white transition-colors">
                            <i class="fab fa-telegram text-xl"></i>
                        </a>
                    </div>
                </div>
                
                <div>
                    <h4 class="text-xl font-semibold mb-4">Контакты</h4>
                    <div class="space-y-3">
                        <div class="flex items-center">
                            <i class="fas fa-phone text-green-400 mr-3"></i>
                            <span>+7 (800) 555-35-35</span>
                        </div>
                        <div class="flex items-center">
                            <i class="fas fa-envelope text-green-400 mr-3"></i>
                            <span>info@dezexpert.ru</span>
                        </div>
                        <div class="flex items-center">
                            <i class="fas fa-clock text-green-400 mr-3"></i>
                            <span>Работаем 24/7</span>
                        </div>
                    </div>
                </div>
                
                <div>
                    <h4 class="text-xl font-semibold mb-4">Услуги</h4>
                    <ul class="space-y-2 text-gray-300">
                        <li>Дезинсекция</li>
                        <li>Дезинфекция</li>
                        <li>Дератизация</li>
                        <li>Фумигация</li>
                    </ul>
                </div>
            </div>
            
            <div class="border-t border-gray-700 mt-8 pt-8 text-center text-gray-400">
                <p>&copy; 2024 DezExpert. Все права защищены.</p>
            </div>
        </div>
    </footer>

    <script>
        // Глобальные переменные
        let currentUserData = null;
        
        // Функции навигации
        function scrollToForm() {
            document.getElementById('order-form').scrollIntoView({ 
                behavior: 'smooth' 
            });
        }
        
        function scrollToPricing() {
            document.getElementById('pricing').scrollIntoView({ 
                behavior: 'smooth' 
            });
        }
        
        // Загрузка тарифов
        async function loadTariffs() {
            try {
                const response = await fetch('/tariff/list');
                if (response.ok) {
                    const data = await response.json();
                    displayTariffs(data.tariffs || []);
                } else {
                    throw new Error('Failed to load tariffs');
                }
            } catch (error) {
                console.warn('Не удалось загрузить тарифы, показываем fallback:', error);
                showFallbackPricing();
            }
        }
        
        // Отображение тарифов
        function displayTariffs(tariffs) {
            const container = document.getElementById('pricing-container');
            const loading = document.getElementById('pricing-loading');
            
            if (loading) {
                loading.remove();
            }
            
            if (tariffs.length === 0) {
                showFallbackPricing();
                return;
            }
            
            const pricingHTML = tariffs.map(tariff => `
                <div class="bg-white rounded-2xl p-8 shadow-lg hover-lift">
                    <div class="text-center mb-6">
                        <h4 class="text-2xl font-bold text-gray-900 mb-2">${tariff.name}</h4>
                        <div class="text-4xl font-bold text-green-600 mb-2">от ${tariff.price}₽</div>
                        <p class="text-gray-600">${tariff.description || 'Профессиональная обработка'}</p>
                    </div>
                    <ul class="space-y-3 mb-8">
                        <li class="flex items-center">
                            <i class="fas fa-check text-green-600 mr-3"></i>
                            Сертифицированные средства
                        </li>
                        <li class="flex items-center">
                            <i class="fas fa-check text-green-600 mr-3"></i>
                            Опытные специалисты
                        </li>
                        <li class="flex items-center">
                            <i class="fas fa-check text-green-600 mr-3"></i>
                            Гарантия результата
                        </li>
                    </ul>
                    <button 
                        onclick="scrollToForm()"
                        class="w-full bg-gradient-primary text-white py-3 rounded-xl font-semibold hover:shadow-lg transition-all duration-300"
                    >
                        Заказать
                    </button>
                </div>
            `).join('');
            
            container.innerHTML = pricingHTML;
        }
        
        // Показать fallback тарифы
        function showFallbackPricing() {
            const loading = document.getElementById('pricing-loading');
            const fallback = document.getElementById('pricing-fallback');
            
            if (loading) {
                loading.remove();
            }
            
            if (fallback) {
                fallback.classList.remove('hidden');
            }
        }
        
        // Обработка формы
        document.getElementById('orderForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const submitBtn = document.getElementById('submitBtn');
            const formMessage = document.getElementById('formMessage');
            
            // Валидация
            const formData = new FormData(this);
            const name = formData.get('name').trim();
            const phone = formData.get('phone').trim();
            const email = formData.get('email').trim();
            const service = formData.get('service');
            
            if (!name || !phone || !email || !service) {
                showMessage('Пожалуйста, заполните все обязательные поля', 'error');
                return;
            }
            
            if (!isValidEmail(email)) {
                showMessage('Пожалуйста, введите корректный email', 'error');
                return;
            }
            
            if (!isValidPhone(phone)) {
                showMessage('Пожалуйста, введите корректный номер телефона', 'error');
                return;
            }
            
            // Отправка формы
            try {
                submitBtn.disabled = true;
                submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Отправляем...';
                
                const orderData = {
                    name: name,
                    phone: phone,
                    email: email,
                    serviceId: service,
                    comment: formData.get('comment') || '',
                    // Добавляем linkId из URL если есть
                    linkId: window.location.pathname.split('/')[1] || null
                };
                
                const response = await fetch('/order', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(orderData)
                });
                
                if (response.ok) {
                    const result = await response.json();
                    showMessage('Заявка успешно отправлена! Мы свяжемся с вами в ближайшее время.', 'success');
                    this.reset();
                } else {
                    const errorData = await response.json();
                    throw new Error(errorData.message || 'Ошибка отправки заявки');
                }
            } catch (error) {
                console.error('Ошибка отправки заявки:', error);
                showMessage('Произошла ошибка при отправке заявки. Попробуйте еще раз.', 'error');
            } finally {
                submitBtn.disabled = false;
                submitBtn.innerHTML = '<i class="fas fa-paper-plane mr-2"></i>Отправить заявку';
            }
        });
        
        // Показать сообщение
        function showMessage(message, type) {
            const formMessage = document.getElementById('formMessage');
            formMessage.textContent = message;
            formMessage.className = `mt-6 p-4 rounded-xl text-center ${
                type === 'success' ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'
            }`;
            formMessage.classList.remove('hidden');
            
            // Скрыть сообщение через 5 секунд
            setTimeout(() => {
                formMessage.classList.add('hidden');
            }, 5000);
        }
        
        // Валидация email
        function isValidEmail(email) {
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return emailRegex.test(email);
        }
        
        // Валидация телефона
        function isValidPhone(phone) {
            const phoneRegex = /^(\+7|7|8)?[\s\-]?\(?[489][0-9]{2}\)?[\s\-]?[0-9]{3}[\s\-]?[0-9]{2}[\s\-]?[0-9]{2}$/;
            return phoneRegex.test(phone.replace(/\s/g, ''));
        }
        
        // Анимации при скролле
        function animateOnScroll() {
            const elements = document.querySelectorAll('.animate-fade-in-up');
            elements.forEach(element => {
                const elementTop = element.getBoundingClientRect().top;
                const elementVisible = 150;
                
                if (elementTop < window.innerHeight - elementVisible) {
                    element.style.opacity = '1';
                    element.style.transform = 'translateY(0)';
                }
            });
        }
        
        // Инициализация
        document.addEventListener('DOMContentLoaded', function() {
            // Загружаем тарифы
            loadTariffs();
            
            // Добавляем анимации
            const elements = document.querySelectorAll('.hover-lift');
            elements.forEach((element, index) => {
                element.style.animationDelay = `${index * 0.1}s`;
                element.classList.add('animate-fade-in-up');
            });
            
            // Слушаем скролл для анимаций
            window.addEventListener('scroll', animateOnScroll);
            
            // Запускаем анимации сразу
            animateOnScroll();
        });
        
        // Форматирование телефона
        document.getElementById('phone').addEventListener('input', function(e) {
            let value = e.target.value.replace(/\D/g, '');
            if (value.startsWith('8')) {
                value = '7' + value.slice(1);
            }
            if (value.startsWith('7')) {
                value = '+7' + value.slice(1);
            }
            
            let formatted = '';
            if (value.length > 0) {
                formatted = value.slice(0, 1);
                if (value.length > 1) {
                    formatted += ' (' + value.slice(1, 4);
                    if (value.length > 4) {
                        formatted += ') ' + value.slice(4, 7);
                        if (value.length > 7) {
                            formatted += '-' + value.slice(7, 9);
                            if (value.length > 9) {
                                formatted += '-' + value.slice(9, 11);
                            }
                        }
                    }
                }
            }
            
            e.target.value = formatted;
        });
    </script>
</body>
</html>
